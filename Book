--
-- PostgreSQL database dump
--

-- Dumped from database version 11.5
-- Dumped by pg_dump version 11.5

-- Started on 2019-12-11 21:17:30

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

SET default_tablespace = '';

SET default_with_oids = false;

--
-- TOC entry 196 (class 1259 OID 16394)
-- Name: author; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.author (
    id bigint NOT NULL,
    date_of_birth date,
    date_of_death date,
    first_name character varying(255) NOT NULL,
    last_name character varying(255) NOT NULL
);


ALTER TABLE public.author OWNER TO postgres;

--
-- TOC entry 207 (class 1259 OID 16589)
-- Name: author_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.author ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.author_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 197 (class 1259 OID 16402)
-- Name: book; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.book (
    id bigint NOT NULL,
    count_of_page integer NOT NULL,
    date_of_publication timestamp without time zone,
    filename character varying(255),
    name character varying(255) NOT NULL,
    price double precision NOT NULL,
    description text,
    author_id bigint NOT NULL,
    publishing_id bigint
);


ALTER TABLE public.book OWNER TO postgres;

--
-- TOC entry 208 (class 1259 OID 26607)
-- Name: book_category; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.book_category (
    book_id bigint NOT NULL,
    category_id bigint NOT NULL
);


ALTER TABLE public.book_category OWNER TO postgres;

--
-- TOC entry 205 (class 1259 OID 16504)
-- Name: book_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.book ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.book_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 206 (class 1259 OID 16574)
-- Name: cart; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.cart (
    user_id bigint NOT NULL,
    book_id bigint NOT NULL
);


ALTER TABLE public.cart OWNER TO postgres;

--
-- TOC entry 198 (class 1259 OID 16420)
-- Name: category; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.category (
    id bigint NOT NULL,
    name character varying(255) NOT NULL
);


ALTER TABLE public.category OWNER TO postgres;

--
-- TOC entry 203 (class 1259 OID 16500)
-- Name: category_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.category ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.category_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 202 (class 1259 OID 16441)
-- Name: hibernate_sequence; Type: SEQUENCE; Schema: public; Owner: postgres
--

CREATE SEQUENCE public.hibernate_sequence
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.hibernate_sequence OWNER TO postgres;

--
-- TOC entry 199 (class 1259 OID 16425)
-- Name: publishing; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.publishing (
    id bigint NOT NULL,
    name character varying(255)
);


ALTER TABLE public.publishing OWNER TO postgres;

--
-- TOC entry 204 (class 1259 OID 16502)
-- Name: publishing_id_seq; Type: SEQUENCE; Schema: public; Owner: postgres
--

ALTER TABLE public.publishing ALTER COLUMN id ADD GENERATED BY DEFAULT AS IDENTITY (
    SEQUENCE NAME public.publishing_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1
);


--
-- TOC entry 209 (class 1259 OID 26617)
-- Name: spring_session; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.spring_session (
    primary_id character(36) NOT NULL,
    session_id character(36) NOT NULL,
    creation_time bigint NOT NULL,
    last_access_time bigint NOT NULL,
    max_inactive_interval integer NOT NULL,
    expiry_time bigint NOT NULL,
    principal_name character varying(100)
);


ALTER TABLE public.spring_session OWNER TO postgres;

--
-- TOC entry 210 (class 1259 OID 26625)
-- Name: spring_session_attributes; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.spring_session_attributes (
    session_primary_id character(36) NOT NULL,
    attribute_name character varying(200) NOT NULL,
    attribute_bytes bytea NOT NULL
);


ALTER TABLE public.spring_session_attributes OWNER TO postgres;

--
-- TOC entry 200 (class 1259 OID 16430)
-- Name: user_role; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.user_role (
    user_id bigint NOT NULL,
    role_set character varying(255)
);


ALTER TABLE public.user_role OWNER TO postgres;

--
-- TOC entry 201 (class 1259 OID 16433)
-- Name: usr; Type: TABLE; Schema: public; Owner: postgres
--

CREATE TABLE public.usr (
    id bigint NOT NULL,
    active boolean,
    active_code character varying(255),
    email character varying(255),
    first_name character varying(255),
    last_name character varying(255),
    password character varying(255),
    username character varying(255)
);


ALTER TABLE public.usr OWNER TO postgres;

--
-- TOC entry 2883 (class 0 OID 16394)
-- Dependencies: 196
-- Data for Name: author; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.author (id, date_of_birth, date_of_death, first_name, last_name) FROM stdin;
72	1799-05-26	1837-01-29	Александр	Пушкин
73	1828-08-28	1910-11-07	Лев	Толстой
74	1828-06-22	1970-09-25	Эрих Мария	Ремарк
75	1920-08-22	2012-06-05	Рэй	Брэбери
76	1775-12-16	1817-07-18	Джейн	Остин
77	1854-10-16	1900-11-30	Оскар	Уайльд
\.


--
-- TOC entry 2884 (class 0 OID 16402)
-- Dependencies: 197
-- Data for Name: book; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.book (id, count_of_page, date_of_publication, filename, name, price, description, author_id, publishing_id) FROM stdin;
78	250	1811-11-11 00:00:00	7cdbeb56-9b54-4e02-ad2e-0688a618356c.61416967.jpg	Евгений Онегин	7.5	Здесь должно быть описание книги, но администратор его не добавил	72	63
80	489	\N	c4e3a119-0c67-4b45-b31e-79d5dc1f03ac.1.jpg	Три товарища	17.3399999999999999	Здесь должно быть описание книги, но администратор его не добавил	74	65
81	389	\N	65f2f953-8322-4fca-809f-ee9bd3231440.3.jpg	Портрет Дориана Грея	13.5600000000000005	Здесь должно быть описание книги, но администратор его не добавил	77	66
84	250	\N	0092da5f-777b-46ab-8e95-ddf058e59388.6.jpg	Вино из одуванчиков	7.88999999999999968		75	63
79	320	\N	08922757-099e-4c50-849c-b057518accb1.2.jpg	Триумфальная арка	16.75	Здесь должно быть описание книги, но администратор его не добавил	74	64
82	420	\N	f2b97318-464a-4bf6-8901-1f37998be1cb.5.jpg	Гордость и Предубеждение	14.8699999999999992		76	67
83	378	\N	9589a522-80f1-4978-8237-8dac9acc6e30.7.jpg	451 градус по Фаренгейту	8.90000000000000036	Здесь должно быть описание книги, но администратор его не добавил	72	68
\.


--
-- TOC entry 2895 (class 0 OID 26607)
-- Dependencies: 208
-- Data for Name: book_category; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.book_category (book_id, category_id) FROM stdin;
78	29
78	64
78	53
79	29
79	64
79	11
80	11
80	29
80	64
81	29
81	11
82	29
84	23
83	23
83	13
\.


--
-- TOC entry 2893 (class 0 OID 16574)
-- Dependencies: 206
-- Data for Name: cart; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.cart (user_id, book_id) FROM stdin;
\.


--
-- TOC entry 2885 (class 0 OID 16420)
-- Dependencies: 198
-- Data for Name: category; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.category (id, name) FROM stdin;
1	Античная литература
2	Биографии и мемуары
3	Военное дело
4	Готовка и кулинария
5	Детские книги
6	Дом и хозяйство
7	Домашние питомцы
8	Драматургия
9	Естественные науки
10	Животные и сельское хозяйство
11	Зарубежная литература
12	История
13	Книги детективы
14	Книги для подростков
15	Книги классика
16	Книги о музыке
17	Книги о путешествиях
18	Книги о фотографии
19	Книги по изучению иностранных языков
20	Книги по математике
21	Книги по недвижимости
22	Книги по ораторскому искусству
23	Книги по психологии
24	Книги по саморазвитию
25	Книги по финансам
26	Книги по экономике
27	Книги про бизнес
28	Книги про компьютер
29	Книги про любовь
30	Книги про менеджмент
31	Менеджмент
32	Политика
33	Афоризмы и цитаты
34	Ужасы
35	Фантастика
36	Комиксы и манга
37	Красота и стиль
38	Культура, искусство и дизайн
39	Литературоведение
40	Медиа
41	Медицина и здоровье
42	Наука и образование
43	Нехудожественная литература
44	Педагогика и воспитание
45	Поэзия
46	Право и юриспруденция
47	Преступность
48	Приключения
49	Проза
50	Развлечения
51	Религия и эзотерика
52	Романы
53	Русская литература
54	Сад и огород
55	Социология и обществознание
56	Спорт
57	Справочники
58	Строительство и ремонт
59	Техника
60	Транспорт
61	Философия
62	Фэнтези книги
63	Хобби и досуг
64	Художественная литература
65	Эротика и секс
66	Юмор
67	Языкознание и лингвистика
\.


--
-- TOC entry 2886 (class 0 OID 16425)
-- Dependencies: 199
-- Data for Name: publishing; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.publishing (id, name) FROM stdin;
63	Амалфея
64	Белый ветер
65	Попурри
66	Новое знание
67	Вечерний Минск
68	Народная Воля
69	\t Издательство белбланкавыд
70	\t Аверсэв
71	Издательство Алексея Вараксина
\.


--
-- TOC entry 2896 (class 0 OID 26617)
-- Dependencies: 209
-- Data for Name: spring_session; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.spring_session (primary_id, session_id, creation_time, last_access_time, max_inactive_interval, expiry_time, principal_name) FROM stdin;
a1720aba-10f3-4c28-a067-4525cc08a7c6	5cd58a8b-709b-4b7c-b875-c190e87e91a0	1576078762208	1576087878434	1800	1576089678434	\N
\.


--
-- TOC entry 2897 (class 0 OID 26625)
-- Dependencies: 210
-- Data for Name: spring_session_attributes; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.spring_session_attributes (session_primary_id, attribute_name, attribute_bytes) FROM stdin;
a1720aba-10f3-4c28-a067-4525cc08a7c6	org.springframework.security.web.csrf.HttpSessionCsrfTokenRepository.CSRF_TOKEN	\\xaced0005737200366f72672e737072696e676672616d65776f726b2e73656375726974792e7765622e637372662e44656661756c7443737266546f6b656e5aefb7c82fa2fbd50200034c000a6865616465724e616d657400124c6a6176612f6c616e672f537472696e673b4c000d706172616d657465724e616d6571007e00014c0005746f6b656e71007e0001787074000c582d435352462d544f4b454e7400055f6373726674002466313232313238662d636135612d343138332d396461362d303861643039633237353938
\.


--
-- TOC entry 2887 (class 0 OID 16430)
-- Dependencies: 200
-- Data for Name: user_role; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.user_role (user_id, role_set) FROM stdin;
3	USER
4	USER
5	USER
6	USER
7	ADMIN
9	USER
10	USER
10	EDITOR
\.


--
-- TOC entry 2888 (class 0 OID 16433)
-- Dependencies: 201
-- Data for Name: usr; Type: TABLE DATA; Schema: public; Owner: postgres
--

COPY public.usr (id, active, active_code, email, first_name, last_name, password, username) FROM stdin;
3	t	5fa9985d-97b8-4482-b4a6-f4c1e31456b0	larry@gmail.com	Ларри	Пейдж	$2a$08$DbKfFDGZGj9iZ6NEb/MnC.rT7R/M.KG4hJXPFlcPEmMESB9xmSkRW	larry
4	t	f6128fef-0401-431a-a48c-c1ed52eb89ba	bill@gmail.com	Билл	Гейтс	$2a$08$RDbYiuV1Mr35Q.rXJreIwOljY74JLpmvVMeFRnVNkFFRiR8EoR6Da	bill
5	t	5d175b8d-1837-4252-8ec9-51e296b5fd29	brean@gmail.com	Сергей	Брин	$2a$08$UQ9S0JmwvlA3Wu8KOJIrb.z8UrH.VrD3V9VGneggkeQ/YQbcQCtru	brean
6	t	f136774c-4cc4-474b-ad18-37288937ddcd	bezos@gmail.com	Джофф	Безос	$2a$08$m73krK5cXxl5g3eedxsane8aJdwAWrj6UIYtBU5L9DhDCm0MtlW22	bezos
7	t	\N	igorpomazzzkov@gmail.com	Igor	Pomazkov	$2a$08$NR/xWaR2H28W4fKgUOf5lOoN5BbFikjWqmEMnxQngux.dR6yC/7sW	igorpomazkov
9	t	\N	merahas503@newmail.top	Катя	Кищук	$2a$08$FPpwWGNsWXrzftI3jdJvw.iumMEHtaPb1623d6x0SnbLAkzcsDSQ6	kkk
10	t	\N	soley78495@mailhub.pro	Коля	Адамов	$2a$08$pLy7/54/lRukrd.wEF3/buNSUHqJJUA5shM.0s8VI4hRmuzRW2fXS	adamov
\.


--
-- TOC entry 2903 (class 0 OID 0)
-- Dependencies: 207
-- Name: author_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.author_id_seq', 13, true);


--
-- TOC entry 2904 (class 0 OID 0)
-- Dependencies: 205
-- Name: book_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.book_id_seq', 71, true);


--
-- TOC entry 2905 (class 0 OID 0)
-- Dependencies: 203
-- Name: category_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.category_id_seq', 67, true);


--
-- TOC entry 2906 (class 0 OID 0)
-- Dependencies: 202
-- Name: hibernate_sequence; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.hibernate_sequence', 84, true);


--
-- TOC entry 2907 (class 0 OID 0)
-- Dependencies: 204
-- Name: publishing_id_seq; Type: SEQUENCE SET; Schema: public; Owner: postgres
--

SELECT pg_catalog.setval('public.publishing_id_seq', 5, true);


--
-- TOC entry 2735 (class 2606 OID 16401)
-- Name: author author_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.author
    ADD CONSTRAINT author_pkey PRIMARY KEY (id);


--
-- TOC entry 2747 (class 2606 OID 26641)
-- Name: book_category book_category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.book_category
    ADD CONSTRAINT book_category_pkey PRIMARY KEY (book_id, category_id);


--
-- TOC entry 2737 (class 2606 OID 16409)
-- Name: book book_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.book
    ADD CONSTRAINT book_pkey PRIMARY KEY (id);


--
-- TOC entry 2745 (class 2606 OID 16578)
-- Name: cart cart_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cart
    ADD CONSTRAINT cart_pkey PRIMARY KEY (book_id, user_id);


--
-- TOC entry 2739 (class 2606 OID 16424)
-- Name: category category_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.category
    ADD CONSTRAINT category_pkey PRIMARY KEY (id);


--
-- TOC entry 2741 (class 2606 OID 16429)
-- Name: publishing publishing_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.publishing
    ADD CONSTRAINT publishing_pkey PRIMARY KEY (id);


--
-- TOC entry 2755 (class 2606 OID 26632)
-- Name: spring_session_attributes spring_session_attributes_pk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.spring_session_attributes
    ADD CONSTRAINT spring_session_attributes_pk PRIMARY KEY (session_primary_id, attribute_name);


--
-- TOC entry 2752 (class 2606 OID 26621)
-- Name: spring_session spring_session_pk; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.spring_session
    ADD CONSTRAINT spring_session_pk PRIMARY KEY (primary_id);


--
-- TOC entry 2743 (class 2606 OID 16440)
-- Name: usr usr_pkey; Type: CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.usr
    ADD CONSTRAINT usr_pkey PRIMARY KEY (id);


--
-- TOC entry 2753 (class 1259 OID 26638)
-- Name: spring_session_attributes_ix1; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX spring_session_attributes_ix1 ON public.spring_session_attributes USING btree (session_primary_id);


--
-- TOC entry 2748 (class 1259 OID 26622)
-- Name: spring_session_ix1; Type: INDEX; Schema: public; Owner: postgres
--

CREATE UNIQUE INDEX spring_session_ix1 ON public.spring_session USING btree (session_id);


--
-- TOC entry 2749 (class 1259 OID 26623)
-- Name: spring_session_ix2; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX spring_session_ix2 ON public.spring_session USING btree (expiry_time);


--
-- TOC entry 2750 (class 1259 OID 26624)
-- Name: spring_session_ix3; Type: INDEX; Schema: public; Owner: postgres
--

CREATE INDEX spring_session_ix3 ON public.spring_session USING btree (principal_name);


--
-- TOC entry 2759 (class 2606 OID 16579)
-- Name: cart fk5n0sq8ulj6ykdnrh4dnk0vfmw; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cart
    ADD CONSTRAINT fk5n0sq8ulj6ykdnrh4dnk0vfmw FOREIGN KEY (book_id) REFERENCES public.book(id);


--
-- TOC entry 2760 (class 2606 OID 16584)
-- Name: cart fkc9objqhvjc84nmsxvwk64dajp; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.cart
    ADD CONSTRAINT fkc9objqhvjc84nmsxvwk64dajp FOREIGN KEY (user_id) REFERENCES public.usr(id);


--
-- TOC entry 2757 (class 2606 OID 16448)
-- Name: book fkdj2ayuksak2l2wgl2q9emj3h4; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.book
    ADD CONSTRAINT fkdj2ayuksak2l2wgl2q9emj3h4 FOREIGN KEY (publishing_id) REFERENCES public.publishing(id);


--
-- TOC entry 2758 (class 2606 OID 16473)
-- Name: user_role fkfpm8swft53ulq2hl11yplpr5; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.user_role
    ADD CONSTRAINT fkfpm8swft53ulq2hl11yplpr5 FOREIGN KEY (user_id) REFERENCES public.usr(id);


--
-- TOC entry 2756 (class 2606 OID 16443)
-- Name: book fkklnrv3weler2ftkweewlky958; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.book
    ADD CONSTRAINT fkklnrv3weler2ftkweewlky958 FOREIGN KEY (author_id) REFERENCES public.author(id);


--
-- TOC entry 2761 (class 2606 OID 26633)
-- Name: spring_session_attributes spring_session_attributes_fk; Type: FK CONSTRAINT; Schema: public; Owner: postgres
--

ALTER TABLE ONLY public.spring_session_attributes
    ADD CONSTRAINT spring_session_attributes_fk FOREIGN KEY (session_primary_id) REFERENCES public.spring_session(primary_id) ON DELETE CASCADE;


-- Completed on 2019-12-11 21:17:31

--
-- PostgreSQL database dump complete
--

